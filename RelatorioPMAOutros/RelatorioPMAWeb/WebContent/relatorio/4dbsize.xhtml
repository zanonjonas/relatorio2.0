<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<div id='dbsize' class="quebrapagina">
		<p class="sub-titulo1">4 Tamanho do banco de dados</p>
		<h:outputScript library="js" name="jquery.js" target="head" />
		<h:outputScript library="js" name="jquery.flot.js" target="head" />
		<h:outputScript library="js" name="jquery.flot.orderBars.js"
			target="head" />
		<h:outputScript library="js" name="jquery.flot.byte.js" target="head" />
		<h:outputStylesheet library="css" name="grafico.css" target="head" />
		<h:outputStylesheet library="css" name="table-style.css" target="head" />
			
		 <ui:repeat value="#{relatorioBean.getRelatorioById(relatorioBean.relatorioId,relatorioBean.mesRelatorio)}" var="r" varStatus="statusRelatorio">
			 
			<ui:repeat value="#{r.capituloVO}" var="c" varStatus="statusCapitulo" >


				<h:panelGroup layout="block" rendered='#{c.capitulo == "3"}'>

					
					<ui:repeat value="#{c.hostVO}" var="h" varStatus="statusHost" >
					
						<ui:repeat value="#{h.instanciaVO}" var="i" varStatus="statusInstancia" >
						
							<ui:repeat value="#{i.graficoVO}" var="g" varStatus="statusGrafico" >
							
							<h:panelGroup layout="block" rendered='#{g.capitulo == "4"}'>
						
								<h:outputScript rendered="#{g.tipoPeriodoId == 2}">
										//Grafico Anual
										$(function () {
										    var previousPoint;
									
									<ui:repeat value="#{g.graficoLinhaVO}" var="l" varStatus="statusLinha" >
									
												d#{l.ordem} = #{graficoBean.getLinhaValorJS(l.linhaId, g.graficoId, g.tipoPeriodoId, l.tipoConsolidacaoDadoId, true)};
												 
									</ui:repeat>
											
											    var ds = new Array();
											    var options = {
											            legend:{         
											                container:$("##{g.graficoId}-legendadbsize"),
											                noColumns:#{g.graficoLinhaVO.size()},
											            },
											            xaxis: {
											            	mode: "time",
															minTickSize: [1, "month"],
															timeformat: "%b %y"
											            },
											            yaxis: {           
	           								            	autoscaleMargin: 0.10,
											            	mode: "byteRate"

											            },
											            points: {
				                    						radius: 3,
				                    						fill: true,
				                    						show: true
				                						}
											    }
											    
											    <ui:repeat value="#{g.graficoLinhaVO}" var="l" varStatus="statusLinha" >
												    
												    ds.push({
														label: "#{graficoBean.parseLegenda(g.graficoId,l.linhaId,l.legenda)}",
														color: "#{l.cor}",
												        data:d#{l.ordem},
												        lines: {
											            show: true, 
											            lineWidth: 3, 
											            order: #{l.ordem}
											        	    }
												    });
												    
												    
											    </ui:repeat>
											    
											    //Display graph
											    $.plot($("##{g.graficoId}-graficodbsize"), ds, options);
											    });
										    </h:outputScript>
										
											<div>
											 
												<p class="sub-titulo2">3.#{statusHost.index+1}.#{statusInstancia.index+1}.#{g.ordemPlot} #{g.tituloDisplayName} #{g.graficoId}</p>
												<br />
												<div>
													<div id="#{g.graficoId}-graficodbsize" class="graph-gnd"></div>
													<div align="center">
														<div id="#{g.graficoId}-legendadbsize"></div>
													</div>
												</div>
											</div>  
														
											<div>
											
											<ui:repeat value="#{graficoBean.getTabelaDBsize(g.graficoId)}" var="j" varStatus="tbLinha" >
											
											<table class="default-table">
												<tr>
													<th class="default-table-odd-row">Tamanho em #{j.mesA}</th>
													<th class="default-table-odd-row">#{j.valorA}</th>
												</tr>

												<tr>
													<th class="default-table-even-row">Tamanho em #{j.mesD}</th>
													<th class="default-table-even-row">#{j.valorD}</th>
												</tr>

												<tr>
													<th class="default-table-odd-row">Variação dos ultimos 2 meses</th>
													<th class="default-table-odd-row">#{j.varAbs}</th>
												</tr>

												<tr>
													<th class="default-table-even-row">Variação dos ultimos 2 meses (%)</th>
													<th class="default-table-even-row">#{j.varPct}%</th>
												</tr>

												<tr>
													<th class="default-table-odd-row">Utilização do total (%)</th>
													<th class="default-table-odd-row">#{j.utlTotalPct}%</th>
												</tr>
	
	
											</table>
											
											
											
												
											</ui:repeat>
													
												
												
												<div align="center"><p>Variação dos últimos dois meses.</p></div>
		
								<br></br>
								<br></br>
								</div>				
									</h:panelGroup>		
								</ui:repeat>
							</ui:repeat>
						</ui:repeat>
					</h:panelGroup>
				</ui:repeat>
			</ui:repeat>


		
	</div>

</ui:composition>